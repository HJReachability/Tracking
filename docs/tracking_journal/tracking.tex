%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%2345678901234567890123456789012345678901234567890123456789012345678901234567890
%        1         2         3         4         5         6         7         8

%\documentclass[12pt, draftcls, onecolumn]{IEEEtran}
\documentclass[journal]{IEEEtran}

 
\IEEEoverridecommandlockouts                              % This command is only
                                                          % needed if you want to
                                                          % use the \thanks command

\usepackage{amsmath}    % need for sub equations
\usepackage{amsfonts}
\usepackage{graphicx}   % need for figures
\usepackage{subcaption}
\usepackage{epsfig} 
\usepackage{algorithmic}
\usepackage{color}
\usepackage[normalem]{ulem}
\usepackage{cancel}
\usepackage{amssymb}
\usepackage{color}

\usepackage[ruled,vlined,titlenotnumbered]{algorithm2e} 
\usepackage{cite}
\usepackage{float}

\newcommand{\R}{\mathbb{R}}
\newcommand{\xset}{\mathcal{X}}
\newcommand{\yset}{\mathcal{Y}}
\newcommand{\xfset}{\mathbb{X}}
\newcommand{\yfset}{\mathbb{Y}}

\newcommand{\reachset}{\mathcal{V}}
\newcommand{\targetset}{\mathcal{L}}
\newcommand{\traj}{\zeta} % trajectory


\newcommand{\pcset}{\mathcal{U}_p} %planner control set
\newcommand{\pcfset}{\mathbb{U}_p} %planner control function set
\newcommand{\tcset}{\mathcal{U}_s} %tracker control set
\newcommand{\tcfset}{\mathbb{U}_s} %tracker control funciton set
\newcommand{\dset}{\mathcal{D}}
\newcommand{\dfset}{\mathbb{D}}

\newcommand{\pset}{\mathcal{P}} %planner set set
\newcommand{\tset}{\mathcal{S}} %tracker set
\newcommand{\rset}{\mathcal{R}}

\newcommand{\tvar}{t}
\newcommand{\thor}{T} % Time horizon

\newcommand{\astate}{\eta}
\newcommand{\estate}{e}
\newcommand{\tstate}{s} % Tracker state
\newcommand{\pstate}{p} % Planner state
\newcommand{\rstate}{r} % Relative state
\newcommand{\rtrans}{\phi}

\newcommand{\ttraj}{\xi_{\tdyn}} % Tracker trajectory
\newcommand{\ptraj}{\xi_{\pdyn}} %Planner trajectory
\newcommand{\rtraj}{\xi_\rdyn}

\newcommand{\senseDist}{m}


\newcommand{\tctrl}{u_s} % Tracker control
\newcommand{\dstb}{d} % Disturbance
\newcommand{\pctrl}{u_p} % Planner control

\newcommand{\tdyn}{f} % Tracker dynamics
\newcommand{\pdyn}{h} % Planner Dynamics
\newcommand{\rdyn}{g} % Relative dynamics

\newcommand{\plannerfunc}{\text{nextState}}

\newcommand{\ptind}{i} % Index of vehicle state corresponding to planner state
\newcommand{\ptmat}{Q} % Matrix for transforming planner state to the same length as tracker state
\newcommand{\tpmat}{Q^T}

\newcommand{\errfunc}{l} % Error function
\newcommand{\valfunc}{V} % Value function
\newcommand{\walfunc}{W} % Value function

\newcommand{\deriv}{\nabla\valfunc} %gradient look-up table

\newcommand{\dx}{\Delta x} %distance allowed in a time step
\newcommand{\dt}{\Delta t} %time step

\newcommand{\tgoal}{\mathcal G}
\newcommand{\goal}{\tgoal_\pstate}

\newcommand{\tconstr}{\mathcal C}
\newcommand{\constr}{\tconstr_\pstate}
\newcommand{\constrSense}{\tconstr_{\pstate,\text{sense}}}
\newcommand{\constrAug}{\tconstr_{\pstate,\text{aug}}}

%\newcommand{\obsSense}{\mathcal{O}_\text{sense}}
%\newcommand{\obsAug}{\mathcal{O}_\text{aug}}



\newcommand{\TEB}{\mathcal B} % tracking error bound

\newtheorem{thm}{Theorem}
\newtheorem{claim}{Claim}
\newtheorem{rem}{Remark}
\newtheorem{prop}{Proposition}
\newtheorem{proof}{IEEEproof}
\newtheorem{problem}{Problem}
\newtheorem{remark}{Remark}

\newcommand{\MCnote}{\textcolor{blue}}
\newcommand{\SHnote}{\textcolor{red}}

\title{\LARGE \bf FaSTrack: a Modular Framework for Real-Time Motion Planning and Guaranteed Safe Tracking}

\author{Mo Chen*, Sylvia L. Herbert*, Haimin Hu, Ye Pu, Jaime F. Fisac, Somil Bansal, SooJean Han, Claire J. Tomlin
%\thanks{This research is supported by ONR under the Embedded Humans MURI (N00014-16-1-2206). The research of S. Herbert has received funding from the NSF GRFP and the UC Berkeley Chancellor's Fellowship Program.}
\thanks{* Both authors contributed equally to this work.}
\thanks{M. Chen is with the Department of Aeronautics and Astronautics, Stanford University. mochen72@stanford.edu}
\thanks{S. Herbert, Y. Pu, J. Fisac, S. Bansal, C. Tomlin are with the Department of Electrical Engineering and Computer Sciences, UC Berkeley. \{sylvia.herbert, ye.pu, jfisac, somil, tomlin\}@berkeley.edu}
\thanks{H. Hu is with ... }
\thanks{S. Han is with ... }
}


\begin{document}
\maketitle
\thispagestyle{empty}
\pagestyle{empty}

%%%
\begin{abstract}
Real-time and guaranteed safe trajectory planning is vital to many applications of autonomous systems, particularly for systems navigating in unknown environments.
However, algorithms for real-time trajectory planning typically sacrifice robustness to achieve computation speed. 
Alternatively, provably safe trajectory planning tends to be computationally intensive and cannot re-plan trajectories in real-time. 
We propose FaSTrack, Fast and Safe Tracking, to allow for real-time robust planning of dynamical systems. 
In this framework, real-time computation speed is achieved by allowing any path or trajectory planner to plan using a simplified and efficient \textit{planning model} of the autonomous system.  
The plan is tracked using the autonomous system, represented by a more realistic and higher-dimensional \textit{tracking model}. 
We can precompute the worst-case tracking error due to model-mismatch between the tracking and planning models, as well as due to external disturbances (e.g. wind).  
This tracking error bound (TEB) can be either finite time horizon or infinite time horizon.
In the former case, a time-varying TEB is obtained, and in the latter, a time-invariant TEB is obtained.
The TEB comes with a precomputed safety control function for the tracking model to stay within the bound during online planning.  
This allows for fast online planning using the planning model, with guaranteed safe real-time tracking of the plan using the TEB and safety control function.
%any path or trajectory planner using simplified dynamics to plan quickly can be used. 
%In conjunction, a differential game approach produces a safety controller for the vehicle along with a guaranteed tracking error bound. 
%This bound captures all possible deviations in the planning space due to model mismatch between higher-dimensional and simplified models of the system, as well as external disturbances.
%The tracking error bound can be either finite time horizon or infinite time horizon.
%In the former case, a time-invariant TEB is obtained, and in the latter, a time-varying TEB is obtained.
We demonstrate FaSTrack using Hamilton-Jacobi reachability and three different trajectory planners with three different tracking-planning model pairs.
\end{abstract}

\input{introduction.tex}
% Introduction (.5-1p)
%%Tracking with quadrotors is a need
%%There exist methods that work in real time and methods that work for safety but not very many for both
%%Goal: combine both in a simple way

\input{relatedwork.tex}
% Related Work (1p)
%%work on fast planning
%%work on safe planning
%%work on both
%%how ours is different

\input{formulation.tex}
% formally introduce the problem

\input{framework.tex}
%framework of algorithm

\input{precomp.tex}
% Computing capture basin (~2.5p)
%% HJ Reachability (~1p)
%% Relative dynamics, setup, etc. (~1p)
%% Capture basin computation (~0.5p)

\input{online.tex}
% online part of framework

\input{reach_planner.tex}

\input{rrt_planner.tex}

\input{mpc_planner.tex}
% Numerical Simulations (1-2p)
%% demonstrate feasibility (~.5)
%% real-time computation load (~.5)
%% comparison to other methods (~.5)

\input{conclusion.tex}
% Conclusion (0.5p)

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\addtolength{\textheight}{1cm}   % This command serves to balance the column lengths
                                  % on the last page of the document manually. It shortens
                                  % the textheight of the last page by a suitable amount.
                                  % This command does not take effect until the next page
                                  % so it should come on the page before the last. Make
                                  % sure that you do not shorten the textheight too much.

\bibliographystyle{IEEEtran}
\bibliography{references}
\end{document}
